{% extends "Layout/Main.twig" %}
{% block header %}
    <!-- DataTables -->
    <link rel="stylesheet" href="/assets/plugins/datatables/dataTables.bootstrap.css"/>
{% endblock %}

{% block Content %}
    <div class="row">
        <div class="col-xs-12">
            <div class="box">
                {#<div class="box-header">#}
                {#<h3 class="box-title">Data Table With Full Features</h3>#}
                {#</div>#}
                <!-- /.box-header -->
                <div class="box-body">
                    <table id="data" class="table table-bordered table-striped">
                        <thead>
                        <tr>
                            <th>ID</th>
                            <th>姓名</th>
                            <th>性别</th>
                            <th>年纪</th>
                            <th>操作</th>
                        </tr>
                        </thead>
                        <tbody>
                        </tbody>
                    </table>
                </div>
                <!-- /.box-body -->
            </div>
        </div>
    </div>
{% endblock %}

{% block footer %}
    <script src="/assets/plugins/datatables/jquery.dataTables.min.js"></script>
    <script src="/assets/plugins/datatables/dataTables.bootstrap.min.js"></script>

    <script>
        $(function () {
            $("#data").DataTable({
                processing: true,
                serverSide: true,
                ajax: {
                    "url": "/workers",
                    "type": "POST"
                },
                columns: [
                    { "data": "WorkerID" },
                    { "data": "Name" },
                    { "data": "IdentityNum" },
                    { "data": "Age" },
                    { "data": "Sex" }
                ],
                columnDefs: [
                    {
                        "targets": 0,
                        "visible":false
                    },
                    {
                        "targets": -2,
                        "render": function(data, type, row){
                            return row.Sex == 1 ? "男":"女";
                        }
                    },
                    {
                        "targets": -1,
                        "render": function(data, type, row){
                            return "<a href=\"workerDetail/" + row.WorkerID +"\"><span class=\"glyphicon glyphicon-pencil\" aria-hidden=\"true\"></span></a>";
                        }
                    }
                ],
                language:{url: "/assets/plugins/datatables/locals/zh-cn.json"}
            });
        });

    </script>
{% endblock %}
{#{% macro operation(wId) %}#}
    {#<a href="workerDetail?wId={{ wId }}">#}
        {#<span class="glyphicon glyphicon-pencil" aria-hidden="true"></span></a>#}
{#{% endmacro %}#}